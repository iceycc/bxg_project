(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{200:function(t,i,s){"use strict";s.r(i);var e=s(272),a=s(218);for(var n in a)"default"!==n&&function(t){s.d(i,t,function(){return a[t]})}(n);s(265);var o=s(75),d=Object(o.a)(a.default,e.a,e.b,!1,null,"fe9c63aa",null);d.options.__file="src/components/goods/goodsinfo.vue",i.default=d.exports},218:function(t,i,s){"use strict";s.r(i);var e=s(219),a=s.n(e);for(var n in e)"default"!==n&&function(t){s.d(i,t,function(){return e[t]})}(n);i.default=a.a},219:function(t,o,d){"use strict";(function(s){Object.defineProperty(o,"__esModule",{value:!0});var t,i=d(4),e=(t=i)&&t.__esModule?t:{default:t};d(264);var a=d(78),n=d(37);o.default={data:function(){return{goods:{},count:1,isShowIntroduction:!0,pageIndex:1,pageSize:2,commentInfo:{},addToShopCartOffset:null,shoppingCartCountOffset:null,isShow:!1}},components:{},watch:{$route:function(t){this.getGoodsData(),this.getCommentListData()}},created:function(){this.getGoodsData(),this.getCommentListData()},updated:function(){s("#magnifier1").imgzoon({magnifier:"#magnifier1"})},methods:(0,e.default)({getGoodsData:function(){var i=this,t="site/goods/getgoodsinfo/"+this.$route.params.goodsId;this.$axios.get(t).then(function(t){i.goods=t.data.message,setTimeout(function(){i.addToShopCartOffset=s(i.$refs.addToShopCartRef).offset(),s(i.$refs.animateRef).css(i.addToShopCartOffset),i.shoppingCartCountOffset=s("#shoppingCartCount").offset()},200)})},getCommentListData:function(){var i=this,t="site/comment/getbypage/goods/"+this.$route.params.goodsId+"?pageIndex="+this.pageIndex+"&pageSize="+this.pageSize;this.$axios.get(t).then(function(t){i.commentInfo=t.data})},handleSizeChange:function(t){this.pageSize=t,this.pageIndex=1,this.getCommentListData()},handleCurrentChange:function(t){this.pageIndex=t,this.getCommentListData()},postComment:function(){var i=this,t=this.$refs.textAreaRef.value;if(0!==t.trim().length){var s="site/validate/comment/post/goods/"+this.$route.params.goodsId;this.$axios.post(s,{commenttxt:t}).then(function(t){i.$message({message:"评论成功!",type:"success"}),i.$refs.textAreaRef.value="",i.pageIndex=1,i.getCommentListData()})}else this.$message({message:"请填写评论内容!",type:"warning"})}},(0,n.mapMutations)([a.ADD_GOODS]),{addToShopCart:function(){this.isShow=!0;var t={goodsId:this.$route.params.goodsId,count:this.count};this.ADD_GOODS(t)},beforeEnter:function(t){t.style.top=this.addToShopCartOffset.top+"px",t.style.left=this.addToShopCartOffset.left+"px",t.style.transform="scale(1)"},enter:function(t,i){t.style.transition="all .6s",t.offsetWidth,t.style.top=this.shoppingCartCountOffset.top+"px",t.style.left=this.shoppingCartCountOffset.left+"px",t.style.transform="scale(0.5)",i()},afterEnter:function(t){this.isShow=!1}})}}).call(this,d(97))},220:function(t,i,s){},264:function(t,i,e){"use strict";(function(t){var i,p,_,s=e(2),o=(i=s)&&i.__esModule?i:{default:i};_={magnifier:".magnifier",container:".magnifier-container",containerImg:".images-cover",view:".magnifier-view",width:368,height:368,moveView:".move-view",moveWidth:null,zoom:3,thumbnail:".magnifier-line > ul",assembly:".magnifier-btn",index:0},(p=t).fn.imgzoon=function(t){if("object"==(void 0===t?"undefined":(0,o.default)(t)))for(var i in t)_[i]=t[i];var d={};d.magnifier=p(_.magnifier),d.container=d.magnifier.find(_.container),d.view=d.magnifier.find(_.view),d.moveView=d.magnifier.find(_.moveView),d.thumbnail=d.magnifier.find(_.thumbnail),d.assembly=d.magnifier.find(_.assembly),d.containerImg=d.magnifier.find(_.containerImg);var r,c,l,m,f,v,h,u,g,e=d.containerImg;d.magnifier.css({width:_.width}),d.container.css({width:_.width,height:_.height}),d.view.css({width:_.width,height:_.height}),r=_.moveWidth?_.moveWidth:_.width/_.zoom,c=r,d.moveView.css({width:r,height:c}),d.eqImg=function(){var i=new Image,s=d.thumbnail.find("img").eq(_.index).attr("src");i.src=s,_.width,_.height,d.thumbnail.find(">*").removeClass("active").eq(_.index).addClass("active"),function t(){0==i.width&&(i.onload=t),u=i.width>i.height?(h=_.width,i.height/(i.width/_.width)):(h=i.width/(i.height/_.width),_.width),e.empty().append('<img src="'+s+'" width="'+h+'" height="'+u+'" style="'+void 0+'" />'),g=_.width/r,d.view.empty().append('<img src="'+s+'" width="'+h*g+'" height="'+u*g+'" />'),l=(_.width-h)/2,m=_.width-l-r+1,f=(_.height-u)/2,v=_.height-f-c+1}()},d.eqImg(),d.moveFn=function(t){var i=t.clientX-d.magnifier.offset().left-r/2,s=t.clientY-d.magnifier.offset().top+p(document).scrollTop()-c/2,e=l<i?i<m?i:m:l,a=f<s?s<v?s:v:f;a=0<a?a>_.width-c?_.height-c:a:0,d.moveView.css({left:e,top:a,display:"block"});var n=(e-(_.width-h)/2)*g,o=(a-(_.height-u)/2)*g;d.view.css({display:"block"}).find("img").css({"margin-left":-n,"margin-top":-o})},d.container.on("mousemove",function(t){d.moveFn(t)}).on("mouseleave",function(){d.moveView.hide(),d.view.hide()});var a=d.thumbnail.find(">*"),n=a.length;d.imgMove=function(t){t?_.index++:_.index--;var i=Math.ceil(_.width/a.width()/2);if(n<i)return!1;_.index<0?_.index=0:_.index>n-i?_.index=n-i:_.index;var s=a.width()*_.index-a.width();d.thumbnail.css({left:(0<s?-s:0)+"px"})},d.assembly.find(">*").on("click",function(){d.imgMove(p(this).index())}),a.on("click",function(){_.index=p(this).index(),d.eqImg(),d.imgMove(_.index)}),d.setIndex=function(t){_.index=t||0},p.myimgzoomobj=d}}).call(this,e(97))},265:function(t,i,s){"use strict";var e=s(220);s.n(e).a},272:function(t,i,s){"use strict";var e=function(){var i=this,t=i.$createElement,s=i._self._c||t;return s("div",[i._m(0),i._v(" "),s("div",{staticClass:"section"},[s("div",{staticClass:"wrapper clearfix"},[s("div",{staticClass:"wrap-box"},[i.goods.goodsinfo?s("div",{staticClass:"left-925"},[s("div",{staticClass:"goods-box clearfix"},[s("div",{staticClass:"pic-box"},[s("div",{staticClass:"magnifier",attrs:{id:"magnifier1"}},[i._m(1),i._v(" "),s("div",{staticClass:"magnifier-assembly"},[i._m(2),i._v(" "),s("div",{staticClass:"magnifier-line"},[s("ul",{staticClass:"clearfix animation03"},i._l(i.goods.imglist,function(t){return s("li",{key:t.id},[s("div",{staticClass:"small-img"},[s("img",{attrs:{src:t.thumb_path}})])])}))])]),i._v(" "),s("div",{staticClass:"magnifier-view"})])]),i._v(" "),s("div",{staticClass:"goods-spec"},[s("h1",[i._v(i._s(i.goods.goodsinfo.title))]),i._v(" "),s("p",{staticClass:"subtitle"},[i._v(i._s(i.goods.goodsinfo.sub_title))]),i._v(" "),s("div",{staticClass:"spec-box"},[s("dl",[s("dt",[i._v("货号")]),i._v(" "),s("dd",{attrs:{id:"commodityGoodsNo"}},[i._v(i._s(i.goods.goodsinfo.goods_no))])]),i._v(" "),s("dl",[s("dt",[i._v("市场价")]),i._v(" "),s("dd",[s("s",{attrs:{id:"commodityMarketPrice"}},[i._v("¥"+i._s(i.goods.goodsinfo.market_price))])])]),i._v(" "),s("dl",[s("dt",[i._v("销售价")]),i._v(" "),s("dd",[s("em",{staticClass:"price",attrs:{id:"commoditySellPrice"}},[i._v("¥"+i._s(i.goods.goodsinfo.sell_price))])])])]),i._v(" "),s("div",{staticClass:"spec-box"},[s("dl",[s("dt",[i._v("购买数量")]),i._v(" "),s("dd",[s("div",{staticClass:"stock-box"},[s("el-input-number",{attrs:{min:1,max:i.goods.goodsinfo.stock_quantity,size:"small"},model:{value:i.count,callback:function(t){i.count=t},expression:"count"}})],1),i._v(" "),s("span",{staticClass:"stock-txt"},[i._v("\n                                            库存\n                                            "),s("em",{attrs:{id:"commodityStockNum"}},[i._v(i._s(i.goods.goodsinfo.stock_quantity))]),i._v("件\n                                        ")])])]),i._v(" "),s("dl",[s("dd",[s("div",{staticClass:"btn-buy",attrs:{id:"buyButton"}},[s("button",{staticClass:"buy"},[i._v("立即购买")]),i._v(" "),s("button",{ref:"addToShopCartRef",staticClass:"add",on:{click:i.addToShopCart}},[i._v("加入购物车")])])])])])])]),i._v(" "),s("div",{staticClass:"goods-tab bg-wrap",attrs:{id:"goodsTabs"}},[s("div",{staticClass:"tab-head",staticStyle:{position:"static",top:"517px",width:"925px"},attrs:{id:"tabHead"}},[s("ul",[s("li",[s("a",{class:{selected:i.isShowIntroduction},attrs:{href:"javascript:;"},on:{click:function(t){i.isShowIntroduction=!0}}},[i._v("商品介绍")])]),i._v(" "),s("li",[s("a",{class:{selected:!i.isShowIntroduction},attrs:{href:"javascript:;"},on:{click:function(t){i.isShowIntroduction=!1}}},[i._v("商品评论")])])])]),i._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:i.isShowIntroduction,expression:"isShowIntroduction"}],staticClass:"tab-content entry",staticStyle:{display:"block"}},[s("div",{staticStyle:{padding:"5px"},domProps:{innerHTML:i._s(i.goods.goodsinfo.content)}})]),i._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!i.isShowIntroduction,expression:"!isShowIntroduction"}],staticClass:"tab-content",staticStyle:{display:"block"}},[s("div",{staticClass:"comment-box"},[s("div",{staticClass:"form-box",attrs:{id:"commentForm",name:"commentForm"}},[i._m(3),i._v(" "),s("div",{staticClass:"conn-box"},[s("div",{staticClass:"editor"},[s("textarea",{ref:"textAreaRef",attrs:{id:"txtContent",name:"txtContent",sucmsg:" ",datatype:"*10-1000",nullmsg:"请填写评论内容！"}}),i._v(" "),s("span",{staticClass:"Validform_checktip"})]),i._v(" "),s("div",{staticClass:"subcon"},[s("input",{staticClass:"submit",attrs:{id:"btnSubmit",name:"submit",type:"submit",value:"提交评论"},on:{click:i.postComment}}),i._v(" "),s("span",{staticClass:"Validform_checktip"})])])]),i._v(" "),s("ul",{staticClass:"list-box",attrs:{id:"commentList"}},[0===i.commentInfo.totalcount?s("p",{staticStyle:{margin:"5px 0px 15px 69px","line-height":"42px","text-align":"center",border:"1px solid rgb(247, 247, 247)"}},[i._v("暂无评论，快来抢沙发吧！")]):i._e(),i._v(" "),i._l(i.commentInfo.message,function(t){return s("li",{key:t.id},[i._m(4,!0),i._v(" "),s("div",{staticClass:"inner-box"},[s("div",{staticClass:"info"},[s("span",[i._v(i._s(t.user_name))]),i._v(" "),s("span",[i._v(i._s(i._f("dateFmt")(t.add_time,"YYYY-MM-DD HH:mm:ss")))])]),i._v(" "),s("p",[i._v(i._s(t.content))])])])})],2),i._v(" "),s("div",{staticClass:"page-box",staticStyle:{margin:"5px 0px 0px 62px"}},[s("el-pagination",{attrs:{"current-page":i.pageIndex,"page-sizes":[2,5,10,20],"page-size":i.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:i.commentInfo.totalcount},on:{"size-change":i.handleSizeChange,"current-change":i.handleCurrentChange}})],1)])])])]):i._e(),i._v(" "),s("div",{staticClass:"left-220"},[s("div",{staticClass:"bg-wrap nobg"},[s("div",{staticClass:"sidebar-box"},[s("h4",[i._v("推荐商品")]),i._v(" "),s("ul",{staticClass:"side-img-list"},i._l(i.goods.hotgoodslist,function(t){return s("li",{key:t.id},[s("div",{staticClass:"img-box"},[s("router-link",{attrs:{to:"/goodsinfo/"+t.id}},[s("img",{attrs:{src:t.img_url}})])],1),i._v(" "),s("div",{staticClass:"txt-box"},[s("router-link",{attrs:{to:"/goodsinfo/"+t.id}},[i._v(i._s(t.title))]),i._v(" "),s("span",[i._v(i._s(i._f("dateFmt")(t.add_time)))])],1)])}))])])])])])]),i._v(" "),s("transition",{on:{"before-enter":i.beforeEnter,enter:i.enter,"after-enter":i.afterEnter}},[i.goods.imglist?s("div",{directives:[{name:"show",rawName:"v-show",value:i.isShow,expression:"isShow"}],ref:"animateRef",staticClass:"animateDiv"},[s("img",{attrs:{src:i.goods.imglist[0].thumb_path,alt:""}})]):i._e()])],1)},a=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"section"},[s("div",{staticClass:"location"},[s("span",[t._v("当前位置：")]),t._v(" "),s("a",{attrs:{href:"/index.html"}},[t._v("首页")]),t._v(" >\n            "),s("a",{attrs:{href:"/goods.html"}},[t._v("购物商城")]),t._v(" >\n            "),s("a",{attrs:{href:"/goods/42/1.html"}},[t._v("商品详情")])])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"magnifier-container"},[i("div",{staticClass:"images-cover"}),this._v(" "),i("div",{staticClass:"move-view"})])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"magnifier-btn"},[s("span",{staticClass:"magnifier-btn-left"},[t._v("<")]),t._v(" "),s("span",{staticClass:"magnifier-btn-right"},[t._v(">")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"avatar-box"},[i("i",{staticClass:"iconfont icon-user-full"})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"avatar-box"},[i("i",{staticClass:"iconfont icon-user-full"})])}];e._withStripped=!0,s.d(i,"a",function(){return e}),s.d(i,"b",function(){return a})}}]);
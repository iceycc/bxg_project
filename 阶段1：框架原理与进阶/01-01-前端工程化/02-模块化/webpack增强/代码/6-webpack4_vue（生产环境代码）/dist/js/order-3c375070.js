(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{201:function(t,e,r){"use strict";r.r(e);var s=r(273),a=r(221);for(var o in a)"default"!==o&&function(t){r.d(e,t,function(){return a[t]})}(o);var i=r(75),l=Object(i.a)(a.default,s.a,s.b,!1,null,null,null);l.options.__file="src/components/order/order.vue",e.default=l.exports},221:function(t,e,r){"use strict";r.r(e);var s=r(222),a=r.n(s);for(var o in s)"default"!==o&&function(t){r.d(e,t,function(){return s[t]})}(o);e.default=a.a},222:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,a=r(197),o=(s=a)&&s.__esModule?s:{default:s},i=r(77),l=r(78);e.default={components:{VDistpicker:o.default},data:function(){return{goodsList:[],totalCount:0,totalPrice:0,orderForm:{accept_name:"陈华",area:{province:{code:44e4,value:"广东省"},city:{code:440300,value:"深圳市"},area:{code:440306,value:"宝安区"}},address:"中粮商务公园",mobile:"13838389438",email:"chenhuasvip@163.com",post_code:"350011",payment_id:"6",express_id:"1",expressMoment:20,message:"请快点发货",goodsAmount:0},rules:{accept_name:[{required:!0,message:"请输入收货人姓名",trigger:"blur"}],area:[{required:!0,message:"请输入所属地区",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],mobile:[{required:!0,validator:function(t,e,r){if(!e)return r(new Error("请输入手机号码"));/^[1][3,4,5,6,7,8][0-9]{9}$/.test(e)?r():r(new Error("手机号不正确"))},trigger:"blur"}]}}},created:function(){this.getGoodsListData()},computed:{getTotalAmount:function(){return this.totalPrice+this.orderForm.expressMoment}},methods:{onSelected:function(t){this.orderForm.area=t},expressChange:function(t){switch(t){case"1":this.orderForm.expressMoment=20;break;case"2":this.orderForm.expressMoment=10;break;case"3":this.orderForm.expressMoment=8}},getGoodsListData:function(){var s=this,t="site/validate/order/getgoodslist/"+this.$route.query.ids;this.orderForm.goodsids=this.$route.query.ids;var a=(0,i.getLocalGoods)(),o={};this.$axios.get(t).then(function(t){var e=0,r=0;t.data.message.forEach(function(t){t.buycount=a[t.id],o[t.id]=t.buycount,e+=t.buycount,r+=t.buycount*t.sell_price}),s.totalCount=e,s.totalPrice=r,s.orderForm.goodsAmount=r,s.orderForm.cargoodsobj=o,s.goodsList=t.data.message})},goToOrder:function(){var e=this;this.$refs.orderForm.validate(function(t){if(t){e.$axios.post("site/validate/order/setorder",e.orderForm).then(function(t){0===t.data.status?(e.$router.push({path:"pay",query:{orderId:t.data.message.orderid}}),e.$route.query.ids.split(",").forEach(function(t){e.$store.commit(l.DELETEGOODSBYID,t)})):e.$message.error(t.data.message)})}else e.$message.error("检查信息是否填写完整!")})}}}},273:function(t,e,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),e._v(" "),r("div",{staticClass:"section"},[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"bg-wrap"},[e._m(1),e._v(" "),r("div",{staticClass:"cart-box"},[e._m(2),e._v(" "),r("div",{attrs:{id:"orderForm",name:"orderForm",url:""}},[r("div",{staticClass:"form-box address-info"},[r("el-form",{ref:"orderForm",staticClass:"demo-ruleForm",attrs:{model:e.orderForm,rules:e.rules,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"收货人姓名：",prop:"accept_name"}},[r("el-input",{staticStyle:{width:"500px"},model:{value:e.orderForm.accept_name,callback:function(t){e.$set(e.orderForm,"accept_name",t)},expression:"orderForm.accept_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"所属地区：",prop:"area"}},[r("v-distpicker",{attrs:{province:e.orderForm.area.province.value,city:e.orderForm.area.city.value,area:e.orderForm.area.area.value},on:{selected:e.onSelected}})],1),e._v(" "),r("el-form-item",{attrs:{label:"详细地址：",prop:"address"}},[r("el-input",{staticStyle:{width:"500px"},model:{value:e.orderForm.address,callback:function(t){e.$set(e.orderForm,"address",t)},expression:"orderForm.address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号码：",prop:"mobile"}},[r("el-input",{staticStyle:{width:"500px"},model:{value:e.orderForm.mobile,callback:function(t){e.$set(e.orderForm,"mobile",t)},expression:"orderForm.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电子邮箱："}},[r("el-input",{staticStyle:{width:"500px"},model:{value:e.orderForm.email,callback:function(t){e.$set(e.orderForm,"email",t)},expression:"orderForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮政编码："}},[r("el-input",{staticStyle:{width:"250px"},model:{value:e.orderForm.post_code,callback:function(t){e.$set(e.orderForm,"post_code",t)},expression:"orderForm.post_code"}})],1)],1)],1),e._v(" "),e._m(3),e._v(" "),r("ul",{staticClass:"item-box clearfix"},[r("li",[r("label",[r("el-radio",{attrs:{label:"6"},model:{value:e.orderForm.payment_id,callback:function(t){e.$set(e.orderForm,"payment_id",t)},expression:"orderForm.payment_id"}},[e._v("在线支付")]),e._v(" "),r("em",[e._v("手续费：0.00元")])],1)])]),e._v(" "),e._m(4),e._v(" "),r("ul",{staticClass:"item-box clearfix"},[r("li",[r("el-radio-group",{on:{change:e.expressChange},model:{value:e.orderForm.express_id,callback:function(t){e.$set(e.orderForm,"express_id",t)},expression:"orderForm.express_id"}},[r("el-radio",{attrs:{label:"1"}},[e._v("顺丰快递\n                                        "),r("em",[e._v("费用：20.00元 ")])]),e._v(" "),r("el-radio",{attrs:{label:"2"}},[e._v("圆通快递\n                                        "),r("em",[e._v("费用：10.00元")])]),e._v(" "),r("el-radio",{attrs:{label:"3"}},[e._v("韵达快递\n                                        "),r("em",[e._v("费用：8.00元")])])],1)],1)]),e._v(" "),e._m(5),e._v(" "),r("div",{staticClass:"line15"}),e._v(" "),r("table",{staticClass:"cart-table",attrs:{width:"100%",border:"0",align:"center",cellpadding:"8",cellspacing:"0"}},[r("tbody",[e._m(6),e._v(" "),e._l(e.goodsList,function(t){return r("tr",{key:t.id},[r("td",{attrs:{width:"68"}},[r("a",{attrs:{target:"_blank",href:"/goods/show-89.html"}},[r("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.img_url}})])]),e._v(" "),r("td",[r("a",{attrs:{target:"_blank",href:"/goods/show-89.html"}},[e._v(e._s(t.title))])]),e._v(" "),r("td",[r("span",{staticClass:"red"},[e._v("\n                                            ￥"+e._s(t.sell_price)+"\n                                        ")])]),e._v(" "),r("td",{attrs:{align:"center"}},[e._v(e._s(t.buycount))]),e._v(" "),r("td",[r("span",{staticClass:"red"},[e._v("\n                                            ￥"+e._s(t.sell_price*t.buycount)+"\n                                        ")])])])})],2)]),e._v(" "),r("div",{staticClass:"line15"}),e._v(" "),e._m(7),e._v(" "),r("div",{staticClass:"buy-foot clearfix"},[r("div",{staticClass:"left-box"},[r("dl",[r("dt",[e._v("订单备注(100字符以内)")]),e._v(" "),r("dd",[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.orderForm.message,expression:"orderForm.message"}],staticClass:"input",staticStyle:{height:"35px"},attrs:{name:"message"},domProps:{value:e.orderForm.message},on:{input:function(t){t.target.composing||e.$set(e.orderForm,"message",t.target.value)}}})])])]),e._v(" "),r("div",{staticClass:"right-box"},[r("p",[e._v("\n                                    商品\n                                    "),r("label",{staticClass:"price"},[e._v(e._s(e.totalCount))]),e._v(" 件     商品金额：￥\n                                    "),r("label",{staticClass:"price",attrs:{id:"goodsAmount"}},[e._v(e._s(e.totalPrice))]),e._v(" 元    \n                                ")]),e._v(" "),r("p",[e._v("\n                                    运费：￥\n                                    "),r("label",{staticClass:"price",attrs:{id:"expressFee"}},[e._v(e._s(e.orderForm.expressMoment))]),e._v(" 元\n                                ")]),e._v(" "),r("p",{staticClass:"txt-box"},[e._v("\n                                    应付总金额：￥\n                                    "),r("label",{staticClass:"price",attrs:{id:"totalAmount"}},[e._v(e._s(e.getTotalAmount))])]),e._v(" "),r("p",{staticClass:"btn-box"},[r("a",{staticClass:"btn button",on:{click:function(t){e.$router.push("shopcart")}}},[e._v("返回购物车")]),e._v(" "),r("a",{staticClass:"btn submit",attrs:{id:"btnSubmit"},on:{click:e.goToOrder}},[e._v("确认提交")])])])])])])])])])])},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"section"},[r("div",{staticClass:"location"},[r("span",[t._v("当前位置：")]),t._v(" "),r("a",{attrs:{href:"/index.html"}},[t._v("首页")]),t._v(" >\n            "),r("a",{attrs:{href:"/cart.html"}},[t._v("购物车")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cart-head clearfix"},[r("h2",[r("i",{staticClass:"iconfont icon-cart"}),t._v("我的购物车")]),t._v(" "),r("div",{staticClass:"cart-setp"},[r("ul",[r("li",{staticClass:"first active"},[r("div",{staticClass:"progress"},[r("span",[t._v("1")]),t._v("\n                                    放进购物车\n                                ")])]),t._v(" "),r("li",{staticClass:"active"},[r("div",{staticClass:"progress"},[r("span",[t._v("2")]),t._v("\n                                    填写订单信息\n                                ")])]),t._v(" "),r("li",{staticClass:"last"},[r("div",{staticClass:"progress"},[r("span",[t._v("3")]),t._v("\n                                    支付/确认订单\n                                ")])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"slide-tit"},[e("span",[this._v("1、收货地址")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"slide-tit"},[e("span",[this._v("2、支付方式")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"slide-tit"},[e("span",[this._v("3、配送方式")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"slide-tit"},[e("span",[this._v("4、商品清单")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("th",{attrs:{colspan:"2",align:"left"}},[t._v("商品信息")]),t._v(" "),r("th",{attrs:{width:"84",align:"left"}},[t._v("单价")]),t._v(" "),r("th",{attrs:{width:"84",align:"center"}},[t._v("购买数量")]),t._v(" "),r("th",{attrs:{width:"104",align:"left"}},[t._v("金额(元)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"slide-tit"},[e("span",[this._v("5、结算信息")])])}];s._withStripped=!0,r.d(e,"a",function(){return s}),r.d(e,"b",function(){return a})}}]);